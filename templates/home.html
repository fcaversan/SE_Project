{% extends "base.html" %}

{% block title %}Home - Vehicle Connect{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/home-screen.css') }}">
{% endblock %}

{% block content %}
<div class="home-screen">
    <!-- Error/Warning Banner -->
    <div id="error-banner" class="error-banner hidden"></div>
    
    <!-- Pull-to-Refresh Indicator -->
    <div id="refresh-indicator" class="refresh-indicator hidden">
        <div class="spinner"></div>
        <span>Refreshing...</span>
    </div>
    
    <!-- Vehicle Visualization -->
    <div class="vehicle-visualization" id="vehicle-viz">
        <img src="/car_picture.png" 
             alt="Vehicle" 
             class="vehicle-image"
             onerror="this.style.display='none'">
    </div>
    
    <!-- Battery Status Section (User Story 1) -->
    <section class="status-card battery-card">
        <h2>Battery</h2>
        <div class="battery-display">
            <div class="battery-icon" id="battery-icon">
                <div class="battery-level" id="battery-level"></div>
            </div>
            <div class="battery-info">
                <p class="battery-percentage" id="battery-percentage">--</p>
                <p class="battery-range" id="battery-range">-- km</p>
                <p class="last-updated" id="last-updated-battery">--</p>
            </div>
        </div>
    </section>
    
    <!-- Security Status Section (User Story 2) -->
    <section class="status-card security-card">
        <h2>Security</h2>
        <div class="lock-display">
            <div class="lock-icon" id="lock-icon">üîí</div>
            <div class="lock-info">
                <p class="lock-status" id="lock-status">--</p>
                <p class="security-warning hidden" id="security-warning">Unlocked for over 10 minutes</p>
            </div>
        </div>
        <a href="/controls" class="card-action-link">
            <span>Remote Controls</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
        </a>
    </section>
    
    <!-- Climate Status Section (User Story 3) -->
    <section class="status-card climate-card">
        <h2>Climate</h2>
        <div class="climate-display">
            <div class="temp-icon" id="temp-icon">üå°Ô∏è</div>
            <div class="climate-info">
                <p class="cabin-temp" id="cabin-temp">--¬∞C</p>
                <p class="climate-status" id="climate-status">--</p>
            </div>
        </div>
    </section>
    
    <!-- Charging Status Section (Phase 3) -->
    <section class="status-card charging-card">
        <h2>Charging</h2>
        <div class="charging-display">
            <div class="charging-icon" id="charging-icon">‚ö°</div>
            <div class="charging-info">
                <p class="charging-status-text" id="charging-status-text">Not Charging</p>
                <p class="charging-details" id="charging-details">--</p>
            </div>
        </div>
        <a href="/charging" class="card-action-link">
            <span>Manage Charging</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
        </a>
    </section>
    
    <!-- Navigation Section (Phase 4) -->
    <section class="status-card navigation-card">
        <h2>Navigation</h2>
        <div class="navigation-display">
            <div class="nav-icon">üó∫Ô∏è</div>
            <div class="nav-info">
                <p class="nav-text">Plan your trips with charging stops</p>
            </div>
        </div>
        <a href="/navigation" class="card-action-link">
            <span>Trip Planner</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
        </a>
    </section>

    <!-- Preferences Section (Phase 5) -->
    <section class="status-card preferences-card">
        <h2>Preferences</h2>
        <div class="preferences-display">
            <div class="pref-icon">‚öôÔ∏è</div>
            <div class="pref-info">
                <p class="pref-text">Customize your experience</p>
            </div>
        </div>
        <a href="/preferences" class="card-action-link">
            <span>Manage Settings</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
        </a>
    </section>
    
    <!-- Loading State -->
    <div id="loading-skeleton" class="loading-skeleton hidden">
        <div class="skeleton-card"></div>
        <div class="skeleton-card"></div>
        <div class="skeleton-card"></div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/home-screen.js') }}"></script>
{% endblock %}
