{% extends "base.html" %}

{% block title %}Preferences - EV Control{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/preferences.css') }}">
{% endblock %}

{% block content %}
<div class="preferences-page">
    <div class="page-header">
        <button class="back-button" onclick="window.history.back()">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </button>
        <h2>Preferences</h2>
    </div>

    <!-- Tabs -->
    <div class="tabs">
        <button class="tab-button active" data-tab="profile">Profile</button>
        <button class="tab-button" data-tab="notifications">Notifications</button>
        <button class="tab-button" data-tab="display">Display</button>
        <button class="tab-button" data-tab="vehicle">Vehicle</button>
    </div>

    <!-- Profile Tab -->
    <div class="tab-content active" id="profile-tab">
        <div class="card">
            <h3>User Profile</h3>
            <form id="profile-form">
                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" id="name" name="name" placeholder="Your name">
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" placeholder="your.email@example.com">
                </div>
                <div class="form-group">
                    <label for="phone">Phone</label>
                    <input type="tel" id="phone" name="phone" placeholder="+1 (555) 123-4567">
                </div>
                <button type="submit" class="btn btn-primary">Save Profile</button>
            </form>
        </div>
    </div>

    <!-- Notifications Tab -->
    <div class="tab-content" id="notifications-tab">
        <div class="card">
            <h3>Notification Settings</h3>
            <form id="notifications-form">
                <div class="setting-item">
                    <div class="setting-info">
                        <label>Charging Complete</label>
                        <p class="setting-description">Notify when vehicle finishes charging</p>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" name="charging_complete" id="charging_complete">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <label>Charging Interrupted</label>
                        <p class="setting-description">Notify if charging is interrupted</p>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" name="charging_interrupted" id="charging_interrupted">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <label>Low Battery</label>
                        <p class="setting-description">Notify when battery is low</p>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" name="low_battery" id="low_battery">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="form-group">
                    <label for="low_battery_threshold">Low Battery Threshold (%)</label>
                    <input type="number" id="low_battery_threshold" name="low_battery_threshold" min="5" max="50" value="20">
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <label>Software Updates</label>
                        <p class="setting-description">Notify about available updates</p>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" name="software_updates" id="software_updates">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <label>Service Reminders</label>
                        <p class="setting-description">Notify about scheduled maintenance</p>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" name="service_reminders" id="service_reminders">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <label>Trip Updates</label>
                        <p class="setting-description">Notify about navigation and trip progress</p>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" name="trip_updates" id="trip_updates">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <button type="submit" class="btn btn-primary">Save Notifications</button>
            </form>
        </div>
    </div>

    <!-- Display Tab -->
    <div class="tab-content" id="display-tab">
        <div class="card">
            <h3>Display Settings</h3>
            <form id="display-form">
                <div class="form-group">
                    <label for="distance_unit">Distance Unit</label>
                    <select id="distance_unit" name="distance_unit">
                        <option value="km">Kilometers (km)</option>
                        <option value="mi">Miles (mi)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="temperature_unit">Temperature Unit</label>
                    <select id="temperature_unit" name="temperature_unit">
                        <option value="C">Celsius (°C)</option>
                        <option value="F">Fahrenheit (°F)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="energy_unit">Energy Unit</label>
                    <select id="energy_unit" name="energy_unit">
                        <option value="kWh">kWh</option>
                        <option value="kWh/100km">kWh/100km</option>
                        <option value="mi/kWh">mi/kWh</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="time_format">Time Format</label>
                    <select id="time_format" name="time_format">
                        <option value="24h">24-hour</option>
                        <option value="12h">12-hour (AM/PM)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="theme">Theme</label>
                    <select id="theme" name="theme">
                        <option value="auto">Auto (System)</option>
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="language">Language</label>
                    <select id="language" name="language">
                        <option value="en">English</option>
                        <option value="es">Español</option>
                        <option value="fr">Français</option>
                        <option value="de">Deutsch</option>
                    </select>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <label>Show Range</label>
                        <p class="setting-description">Display estimated range on dashboard</p>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" name="show_range" id="show_range">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <label>Show Charging Stations</label>
                        <p class="setting-description">Display nearby stations on map</p>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" name="show_charging_stations" id="show_charging_stations">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <button type="submit" class="btn btn-primary">Save Display Settings</button>
            </form>
        </div>
    </div>

    <!-- Vehicle Tab -->
    <div class="tab-content" id="vehicle-tab">
        <div class="card">
            <h3>Vehicle Settings</h3>
            <form id="vehicle-form">
                <div class="form-group">
                    <label for="default_charging_limit">Default Charging Limit (%)</label>
                    <input type="number" id="default_charging_limit" name="default_charging_limit" min="50" max="100" value="80">
                    <small>Recommended: 80% for daily use</small>
                </div>

                <div class="form-group">
                    <label for="max_charging_current">Max Charging Current (A)</label>
                    <input type="number" id="max_charging_current" name="max_charging_current" min="6" max="48" value="32">
                </div>

                <div class="form-group">
                    <label for="departure_time">Default Departure Time</label>
                    <input type="time" id="departure_time" name="departure_time" value="08:00">
                </div>

                <div class="form-group">
                    <label for="regenerative_braking">Regenerative Braking</label>
                    <select id="regenerative_braking" name="regenerative_braking">
                        <option value="low">Low</option>
                        <option value="standard">Standard</option>
                        <option value="high">High</option>
                    </select>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <label>Preconditioning</label>
                        <p class="setting-description">Pre-heat or cool before departure</p>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" name="preconditioning_enabled" id="preconditioning_enabled">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <label>Auto Seat Heating</label>
                        <p class="setting-description">Automatically heat seats in cold weather</p>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" name="seat_heating_auto" id="seat_heating_auto">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <label>Auto Steering Wheel Heating</label>
                        <p class="setting-description">Automatically heat steering wheel</p>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" name="steering_wheel_heating_auto" id="steering_wheel_heating_auto">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <div class="setting-item">
                    <div class="setting-info">
                        <label>Auto Climate Control</label>
                        <p class="setting-description">Automatically manage cabin temperature</p>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" name="climate_auto_on" id="climate_auto_on">
                        <span class="toggle-slider"></span>
                    </label>
                </div>

                <button type="submit" class="btn btn-primary">Save Vehicle Settings</button>
            </form>
        </div>

        <div class="card danger-zone">
            <h3>Danger Zone</h3>
            <p>Reset all preferences to default values. This action cannot be undone.</p>
            <button type="button" class="btn btn-danger" id="reset-preferences-btn">Reset to Defaults</button>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden">
        <span class="toast-message"></span>
    </div>
</div>

<script src="{{ url_for('static', filename='js/preferences.js') }}"></script>
{% endblock %}
